document.getElementById('startButton').addEventListener('click', function() {
    startTimer();
    startExercise();
});

let wordSlot = document.getElementById("wordSlot");
let visualInterval;
let timerInterval;
let originalWords = [
    "123456789", "987654321", "246813579", "975318642", "135792468", "864297531", "567890123", "321098765", "102938475", "192837465", "837465192", "564738291", "647382915", "293847561", "759182634", "468013579", "157924683", "913846257", "726493851", "345678912", "789012345", "432109876", "567891234", "876543210", "210987654", "321765498", "498765231", "579864213", "864213579", "321654987", "465879231", "102938576", "564728390", "920384756", "374829051", "517928346", "263748195", "617293485", "384759216", "295187364", "538271946", "426759831", "302918475", "475193826", "681392457", "957281634", "721365498", "891243756", "483920165", "349182765", "284736519", "726485193", "103948576", "958127346", "412567893", "678953412", "291874365", "437285910", "264798531", "910382764", "573928164", "498716532", "103847596", "596184327", "285736491", "472395681", "196837452", "328459716", "495871326", "516738924", "238745619", "607193485", "184762593", "459128637", "647291835", "391847265", "275193684", "827364519", "394857216", "217364985", "846927531", "591847362", "295837461", "485926371", "217849365", "562839174", "195834762", "638291475", "473829561", "921487356", "192738465", "648372195", "537291486", "248375961", "517936842", "182394756", "473825196", "283479561", "192847365", "581739462", "736849521", "927364851", "512839746", "473829514", "267384195", "839471265", "573819462", "627348591", "837164295", "628471935", "917253864", "476295138", "329184576", "928374615", "573284961", "102938475", "849213576", "573829146", "183759246", "293847156", "492835176", "285743691", "174839526", "765493812", "318274695", "675193824", "248319657", "837465192", "563821749", "749123586", "418759623", "926348751", "281734956", "758391246", "637184295", "521983746", "839475216", "473815962", "629184753", "197382465", "856394217", "123847596", "947283561", "846192753", "582937146", "631947285", "945731826", "284917365", "756284931", "429138765", "582947316", "365129487", "587493621", "395817246", "294318765", "476295813", "947583126", "627481953", "284917653", "395841762", "758361924", "928374165", "192847356", "482935716", "569271834", "284913756", "658721943", "194382756", "847296531", "394857216", "617284953", "283947561", "849321576", "738491265", "937582146", "284917365", "739285164", "564738291", "293847156", "103948527", "829374615", "593827146", "248379165", "485713692", "374829516", "193748526", "749823561", "917265384", "829471365", "162837495", "487295361", "473829651", "573829614", "395827146", "748392165", "493825176", "819472356", "274839651", "182349576", "493857261", "102938576", "583721946", "471928365", "576928314", "283957146", "283194765", "472819365", "583946721", "271849365", "394857216", "562831497", "576283491", "192847365", "193857246", "285734916", "657283491", "284917365", "859473621", "573829416", "293847165", "295837146", "648291753", "193847562", "839471652", "583947261", "274938561", "746583291", "293847516", "739285641", "927364518", "583947126", "395827614", "473829561", "274938615", "583947126", "385749216", "859372146", "493857261", "473829651", "193857462", "572839416", "837491625", "395846721", "192837465", "576284913", "293847615", "847295136", "573829146", "192837465", "492837561", "847129653", "573829146", "273846195", "384759126", "573849216", "284739561", "847129365", "573849216", "102938746", "495738216", "748392651", "293847615", "837491265", "293847516", "475912836", "573829146", "485712963", "573829146", "283947561", "102938567", "748392165", "495823761", "582749316", "293847156", "748392165", "573829146", "294857316", "576193284", "847195263", "285734916", "394857216", "103948526", "284739561", "293847165", "573829416", "573847216", "385749216", "294857631", "102938465", "475938216", "283947516", "847295136", "573829416", "192847365", "473829651", "495821736", "837461295", "283947561", "839471265", "572819364", "573819462", "183749526", "193857246", "473829165", "473829165", "293847516", "573829146", "495827163", "483927561", "583947126", "473829165", "475938216", "573829146", "192837465", "839475261", "475938216", "293847561", "839471265", "572839165", "295837461", "192837465", "273846159", "573819462", "293847165", "283947516", "193857246", "384759261", "193847526", "293847516", "573819426", "394857216", "573829165", "273846195", "293847561", "859471326", "573819462", "384759216", "573819426", "847192365", "573819462", "193847265", "293847165", "857391264", "573819462", "273846195", "573819426", "837195426", "384759216", "573819462", "395827146", "293847165", "573819426", "193857426", "293847165", "483927165", "475938216", "573819462", "283947561", "384759216", "293847561", "573819462", "573819462", "573829416", "573819462", "473829165", "847193265", "573819462", "847293561", "573819462", "384759216", "395827164", "573819462", "293847561", "573819462", "573829146", "475938216", "384759216", "573819462", "102938476", "573819426", "475938216", "273846195", "573819462", "293847165", "192837465", "485193274", "293847561", "573819462", "573819462", "495728316", "293847561", "839471265", "573829146", "573829416", "273846195", "573819462", "573829146", "293847561", "837194265", "573819426", "384759216", "573819462", "293847165", "293847165", "573819462", "293847561", "573819462", "573829146", "837465192", "573819462", "193847561", "573819462", "283947561", "273846195", "573819426", "573819462", "193847561", "573819426", "573819462", "293847561", "573819462", "573819462", "573829146", "573819462", "475938216", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462", "573819462" 
];
function startExercise() {
    
    // Ocultar instrucciones y botones
    var instructionParagraphs = document.querySelectorAll('.instruction');
    for (var i = 0; i < instructionParagraphs.length; i++) {
        instructionParagraphs[i].style.display = 'none';
    }
    document.getElementById('startButton').style.display = 'none';
    document.getElementById('containerInputButton').style.display = 'none';
    
    // Mostrar la ranura
    document.getElementById('slotContainer').classList.remove('hidden');
    
    // Obtener la velocidad del recorrido desde el campo de entrada
    var speedInput = document.getElementById('speedInput');
    var velocidadRecorrido = parseInt(speedInput.value);
    
    // Iniciar temporizador
    
    // Iniciar el recorrido visual
    startVisualRecorrido(velocidadRecorrido);
}

function startVisualRecorrido(velocidadRecorrido) {
    var wordIndex = 0;
    clearInterval(visualInterval);
    
    visualInterval = setInterval(function() {
        // Mostrar la palabra en la ranura central
        wordSlot.innerHTML = ''; // Limpiar ranura
        var p = document.createElement('p');
        p.textContent = originalWords[wordIndex];
        wordSlot.appendChild(p);
        
        // Incrementar el índice de las palabras
        wordIndex++;
        if (wordIndex >= originalWords.length) {
            wordIndex = 0;
        }
    }, velocidadRecorrido);
}

function startTimer() {
    var timerElement = document.getElementById('timer');
    var totalTime = 180; // 3 minutos en segundos
    var minutes, seconds;
    
    timerInterval = setInterval(function() {
        minutes = Math.floor(totalTime / 60);
        seconds = totalTime % 60;
        timerElement.innerHTML = 'Tiempo restante: ' + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;

        if (totalTime <= 0) {
            clearInterval(timerInterval);
            clearInterval(visualInterval);
            alert('¡El ejercicio ha terminado!');
            return;
        }
        totalTime--;
    }, 1000);
}

